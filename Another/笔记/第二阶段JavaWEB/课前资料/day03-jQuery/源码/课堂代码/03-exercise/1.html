<!DOCTYPE HTML>
<html>
<head>
<title>table练习</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style type="text/css">
	body{
		font-family: "微软雅黑"
	}
	h2, h4{ text-align: center; }
	div#box1, div#box2 {
		text-align:center;
	}
	hr{
		margin: 20px 0;
	}
	table{ 
		margin: 0 auto; 
		width: 70%;
		text-align: center;
		border-collapse:collapse;
	}
	td, th{padding: 7px; width:20%;}
	th{
		background-color: #DCDCDC;
	}
</style>

<!--引入jquery的js库-->
<script src="../js/jquery-1.4.2.js"></script>
<script type="text/javascript">

	//html文档加载完执行
	$(function(){
		//点击添加用户信息
		$("#add").click(function(){
			var id = $("#box1 input[name='id']").val().trim();
			var name = $("#box1 input[name='name']").val().trim();
			var email = $("#box1 input[name='email']").val().trim();
			var salary = $("#box1 input[name='salary']").val().trim();

			//用户信息非空校验
			if(id==""||name==""||email==""||salary==""){
				alert("信息不全");
				return ;
				
			}

			//id重复校验
			var flag = false;
			$("table tr").each(function(){
				if($(this).find("td:eq(1)").text() == id){
					flag = true;
					alert("id重复");
				}
			})
			if(flag){
				return;
			}
			

			
			//完成添加
			var tab = $("table");
			var tr = $("<tr></tr>");
			var id_td = $("<td>"+id+"</td>");
			var name_td = $("<td>"+name+"</td>");
			var email_td = $("<td>"+email+"</td>");
			var salary_td = $("<td>"+salary+"</td>");
			var input = $("<td><input type='checkbox' /></td>")
			tr.append(input).append(id_td).append(name_td).append(email_td).append(salary_td);
			tab.append(tr);
		})
		//删除
		$("#del").click(function(){
			//删除选中的checkbox所在行，但是不能包括第一行
			$("table input:checked:not(#all)").parents("tr").remove();
		})
		//全选
		$("#all").click(function(){
			var checked = $(this).attr("checked");
			$("table tr").each(function(){
				$(this).find("input[type='checkbox']").attr("checked",checked)
			});
		});
		//更新
		$("#upd").click(function(){
			var id = $("#box2 input[name='id']").val().trim();
			var name = $("#box2 input[name='name']").val().trim();
			var email = $("#box2 input[name='email']").val().trim();
			var salary = $("#box2 input[name='salary']").val().trim();
			//用户信息非空校验
			if(id==""||name==""||email==""||salary==""){
				alert("更新信息不全");
				return ;
				
			}
			var flag = false;
			$("table tr").each(function(){
				if($(this).find("td:eq(1)").text() == id){
					$(this).find("td:eq(2)").text(name);
					$(this).find("td:eq(3)").text(email);
					$(this).find("td:eq(4)").text(salary);
					flag = true;
				}
			});
			if(!flag){
				alert("找不到id");
				return ;
			}
		});
	})

	
	
</script>
</head>

<body>
	<h2>添加新员工</h2>
	<div id="box1">
		ID：<input type="text" name="id"/>
		姓名：<input type="text" name="name"/>
		邮箱：<input type="text" name="email"/>
		工资：<input type="text" name="salary"/>
		<input type="button" id="add" value="添加"/>
	</div>
	<hr/>
	<table border="1">
		<tr>
			<th>
				<input type="checkbox" id="all"/>
				<!--全选-->
			</th>
			<th>ID</th>
			<th>姓名</th>
			<th>邮箱</th>
			<th>工资</th>
		</tr>
		<tr>
			<td>
				<input type="checkbox"/>
			</td>
			<td>1</td>
			<td>宋江</td>
			<td>sj@163.com</td>
			<td>12000</td>
		</tr>
		<tr>
			<td>
				<input type="checkbox"/>
			</td>
			<td>2</td>
			<td>武松</td>
			<td>ws@163.com</td>
			<td>10500</td>
		</tr>
		<tr>
			<td>
				<input type="checkbox"/>
			</td>
			<td>3</td>
			<td>孙二娘</td>
			<td>sen@163.com</td>
			<td>11000</td>
		</tr>
	</table>
	<h4><a href="#" id="del">删除选中</a></h2>

	<hr/>

	<div id="box2">
		ID：<input type="text" name="id"/>
		姓名：<input type="text" name="name"/>
		邮箱：<input type="text" name="email"/>
		工资：<input type="text" name="salary"/>
		<input type="button" id="upd" value="修改"/>
	</div>
</body>
</html>



